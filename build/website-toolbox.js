!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["website-toolbox"]={})}(this,function(t){"use strict";function n(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var r={nodes:function(o){return{set:function(t,e,n){t=t[e];if(!t&&"string"!=typeof t)throw new Error("[website-toolbox]: Nodes must be declared before they are assigned a value".concat(o.name&&" in ".concat(o.name,".nodes")));return"function"==typeof o.hooks.updated&&o.hooks.updated.apply(o,[n,t,e]),Reflect.set.apply(Reflect,arguments)}}},data:function(o){return{set:function(t,e,n){t=t[e];if(!t)throw new Error("[website-toolbox]: Cannot assign a value to an undeclared property".concat(o.name&&" in ".concat(o.name,".data")));return"function"==typeof o.hooks.updated&&o.hooks.updated.apply(o,[n,t,e]),Reflect.set.apply(Reflect,arguments)}}},methods:function(r){return{get:function(t,e){var o=t[e];return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return o.apply(r,e)}}}},state:function(o){return{set:function(t,e,n){t=t[e];if(!t)throw new Error("[website-toolbox]: Cannot assign a value to an undeclared property (`".concat(e,"`) in State. Declare an initial value for `").concat(e,"` before assigning a new value to it."));return"function"==typeof o.hooks.updated&&o.hooks.updated.apply(o,[n,t,e]),Reflect.set.apply(Reflect,arguments)}}}};t.Component=function(e){var n=this;Object.keys(e).forEach(function(t){return n[t]=e[t]}),e.root&&(this.root=document.querySelector(this.root));var a,i,s,t={nodes:r.nodes(this),data:r.data(this),methods:r.methods(this)};return e.nodes&&(this.nodes=new Proxy((a=this.root,i=this.nodes,s={},Object.keys(i).forEach(function(t){var e=i[t],n="string"==typeof e,o=Array.isArray(e),r=o?"querySelectorAll":"querySelector";o||n?!n||e.length?s[t]=a[r](e):s[t]=e:s[t]=null}),s),t.nodes)),e.data&&(this.data=new Proxy(this.data,t.data)),e.methods&&(this.methods=new Proxy(this.methods,t.methods)),"function"==typeof this.hooks.setup&&this.hooks.setup.apply(this),function(t){return n.container=t,n._reset=function(){},n.setState=t.setState,n}},t.Container=function(){var o=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.initialState=e.state||{},this.config=e,this.state=new Proxy(this.initialState,r.state(this)),this.components=t.map(function(t){return t(o)}),this.hooks={updated:function(){var e=arguments;this.components.filter(function(t){return t.hooks.containerUpdated}).forEach(function(t){return(t=t.hooks).containerUpdated.apply(t,n(e))})}},this.setState=function(t,e){for(var n in t)o.state[n]=t[n];e&&e(o.state)},this},Object.defineProperty(t,"__esModule",{value:!0})});
